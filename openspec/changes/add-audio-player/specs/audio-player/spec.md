## ADDED Requirements

### Requirement: 音频播放控制

系统 SHALL 提供完整的音频播放控制功能，支持用户进行听力训练。

#### Scenario: 播放音频文件

- **GIVEN** 用户已选择一个音频文件
- **WHEN** 用户点击播放按钮
- **THEN** 系统应开始播放音频并显示播放状态

#### Scenario: 暂停播放

- **GIVEN** 音频正在播放
- **WHEN** 用户点击暂停按钮
- **THEN** 系统应暂停播放并保持当前进度

#### Scenario: 停止播放

- **GIVEN** 音频正在播放或已暂停
- **WHEN** 用户点击停止按钮
- **THEN** 系统应停止播放并重置进度到起点

---

### Requirement: 倍速播放

系统 SHALL 支持调整音频播放速度，以适应不同水平的学习者。

#### Scenario: 调整播放速度

- **GIVEN** 音频正在播放或已加载
- **WHEN** 用户选择倍速（0.5x, 0.75x, 1.0x, 1.25x, 1.5x, 2.0x）
- **THEN** 系统应立即调整播放速度且音调不变

#### Scenario: 默认播放速度

- **GIVEN** 用户首次打开播放器
- **THEN** 系统应默认使用 1.0x 播放速度

---

### Requirement: 播放进度显示

系统 SHALL 实时显示音频播放进度和时长信息。

#### Scenario: 显示播放进度

- **GIVEN** 音频正在播放
- **THEN** 系统应实时更新当前播放时间和总时长（格式：mm:ss / mm:ss）

#### Scenario: 进度条拖动

- **GIVEN** 音频已加载
- **WHEN** 用户拖动进度条到指定位置
- **THEN** 系统应跳转到对应的播放位置

---

### Requirement: 播放器状态管理

系统 SHALL 使用 Riverpod 管理播放器状态，确保状态在整个应用中保持一致。

#### Scenario: 状态持久化

- **GIVEN** 用户正在播放音频
- **WHEN** 用户切换到其他页面
- **THEN** 播放器状态应保持不变（继续播放或暂停状态）

#### Scenario: 资源释放

- **GIVEN** 播放器不再使用
- **WHEN** 用户退出播放器页面
- **THEN** 系统应释放播放器资源以避免内存泄漏

---

### Requirement: 错误处理

系统 SHALL 妥善处理音频播放过程中的异常情况。

#### Scenario: 音频文件加载失败

- **GIVEN** 用户选择了一个无效或损坏的音频文件
- **WHEN** 系统尝试加载该文件
- **THEN** 系统应显示友好的错误提示，并允许用户选择其他文件

#### Scenario: 网络音频加载超时

- **GIVEN** 用户正在加载网络音频
- **WHEN** 网络连接超时
- **THEN** 系统应显示"加载失败，请检查网络连接"提示
