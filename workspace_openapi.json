{"openapi":"3.1.0","info":{"title":"英语学习管理后台","description":"英语学习应用管理后台API","version":"0.1.0"},"paths":{"/api/v1/hello":{"get":{"tags":["测试","测试"],"summary":"Hello World接口","description":"Hello World 测试接口\n\n返回:\n    包含欢迎消息和当前时间的响应","operationId":"hello_world_api_v1_hello_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Hello World Api V1 Hello Get"}}}}}}},"/api/v1/health":{"get":{"tags":["测试","系统"],"summary":"健康检查","description":"系统健康检查接口\n\n返回:\n    系统状态信息","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Api V1 Health Get"}}}}}}},"/api/v1/openai/test":{"get":{"tags":["OpenAI","OpenAI"],"summary":"测试OpenAI连接","description":"测试 OpenAI API 连接\n\n返回:\n    连接状态信息","operationId":"test_openai_connection_api_v1_openai_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Test Openai Connection Api V1 Openai Test Get"}}}}}}},"/api/v1/openai/translate":{"post":{"tags":["OpenAI","OpenAI"],"summary":"翻译文本","description":"翻译文本\n\n参数:\n    request: 翻译请求，包含要翻译的文本和目标语言\n    \n返回:\n    翻译结果","operationId":"translate_text_api_v1_openai_translate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TranslateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Translate Text Api V1 Openai Translate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/openai/grammar":{"post":{"tags":["OpenAI","OpenAI"],"summary":"语法分析","description":"分析句子语法\n\n参数:\n    request: 语法分析请求，包含要分析的句子\n    \n返回:\n    语法分析结果","operationId":"analyze_grammar_api_v1_openai_grammar_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GrammarAnalysisRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Analyze Grammar Api V1 Openai Grammar Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/openai/phonetic":{"post":{"tags":["OpenAI","OpenAI"],"summary":"生成音标","description":"生成音标\n\n参数:\n    request: 音标生成请求，包含文本和口音类型\n    \n返回:\n    音标结果","operationId":"generate_phonetic_api_v1_openai_phonetic_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneticRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Generate Phonetic Api V1 Openai Phonetic Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/openai/config":{"get":{"tags":["OpenAI","OpenAI"],"summary":"查看OpenAI配置","description":"查看当前 OpenAI 配置（不显示完整 API Key）\n\n返回:\n    配置信息","operationId":"get_openai_config_api_v1_openai_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Openai Config Api V1 Openai Config Get"}}}}}}},"/api/v1/videos/{video_id}/run_sync":{"post":{"tags":["Videos"],"summary":"Run Sync Processing","description":"[调试用] 异步触发视频处理任务\n\n- 立即返回 202 Accepted\n- 在后台启动处理任务（不经过 Celery）\n- 包含：音频提取 -> 字幕生成 -> AI 增强","operationId":"run_sync_processing_api_v1_videos__video_id__run_sync_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","description":"强制重新处理","default":false,"title":"Force"},"description":"强制重新处理"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsyncTaskResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/upload":{"post":{"tags":["Videos"],"summary":"Upload Video","description":"上传视频","operationId":"upload_video_api_v1_videos_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_video_api_v1_videos_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/":{"get":{"tags":["Videos"],"summary":"List Videos","description":"获取视频列表","operationId":"list_videos_api_v1_videos__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Size"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/VideoStatus"},{"type":"null"}],"title":"Status"}},{"name":"difficulty","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/DifficultyLevel"},{"type":"null"}],"title":"Difficulty"}},{"name":"keyword","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}":{"get":{"tags":["Videos"],"summary":"Get Video","description":"获取视频详情","operationId":"get_video_api_v1_videos__video_id__get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Videos"],"summary":"Delete Video","description":"删除视频及相关文件","operationId":"delete_video_api_v1_videos__video_id__delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/status":{"get":{"tags":["Videos"],"summary":"Get Video Status","description":"获取视频处状态详情","operationId":"get_video_status_api_v1_videos__video_id__status_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProcessingTaskResponse"},"title":"Response Get Video Status Api V1 Videos  Video Id  Status Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/reprocess":{"post":{"tags":["Videos"],"summary":"Reprocess Video","description":"触发视频重新处理\n\n- 立即返回 202 Accepted\n- 使用 Celery 异步处理","operationId":"reprocess_video_api_v1_videos__video_id__reprocess_post","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","description":"强制重新处理","default":false,"title":"Force"},"description":"强制重新处理"}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AsyncTaskResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Videos"],"summary":"Get Reprocess Status","description":"查询视频处理进度\n\n- 返回总体进度和子任务详情\n- 支持实时查询任务状态\n- 如果视频存在但没有任务记录，返回初始状态（所有任务 pending，进度 0%）","operationId":"get_reprocess_status_api_v1_videos__video_id__reprocess_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskProgressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/videos/{video_id}/subtitles":{"get":{"tags":["Videos"],"summary":"Get Video Subtitles","description":"获取视频字幕","operationId":"get_video_subtitles_api_v1_videos__video_id__subtitles_get","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"integer","title":"Video Id"}},{"name":"include_grammar","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Grammar"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubtitleWithGrammarResponse"},"title":"Response Get Video Subtitles Api V1 Videos  Video Id  Subtitles Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/subtitles/{subtitle_id}":{"put":{"tags":["Subtitles"],"summary":"Update Subtitle","description":"更新字幕内容","operationId":"update_subtitle_api_v1_subtitles__subtitle_id__put","parameters":[{"name":"subtitle_id","in":"path","required":true,"schema":{"type":"integer","title":"Subtitle Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubtitleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubtitleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Subtitles"],"summary":"Delete Subtitle","description":"删除字幕","operationId":"delete_subtitle_api_v1_subtitles__subtitle_id__delete","parameters":[{"name":"subtitle_id","in":"path","required":true,"schema":{"type":"integer","title":"Subtitle Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"tags":["根路径"],"summary":"Root","description":"根路径接口\n\n返回:\n    欢迎信息和API文档链接","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AsyncTaskResponse":{"properties":{"message":{"type":"string","title":"Message","description":"响应消息"},"video_id":{"type":"integer","title":"Video Id","description":"视频ID"},"task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id","description":"Celery 任务ID"},"status":{"type":"string","title":"Status","description":"任务状态"}},"type":"object","required":["message","video_id","status"],"title":"AsyncTaskResponse","description":"异步任务触发响应"},"Body_upload_video_api_v1_videos_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"},"title":{"type":"string","title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"difficulty_level":{"anyOf":[{"$ref":"#/components/schemas/DifficultyLevel"},{"type":"null"}]}},"type":"object","required":["file"],"title":"Body_upload_video_api_v1_videos_upload_post"},"DifficultyLevel":{"type":"string","enum":["beginner","intermediate","advanced"],"title":"DifficultyLevel","description":"难度级别"},"GrammarAnalysisRequest":{"properties":{"sentence":{"type":"string","title":"Sentence"}},"type":"object","required":["sentence"],"title":"GrammarAnalysisRequest","description":"语法分析请求模型"},"GrammarAnalysisResponse":{"properties":{"sentence_structure":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sentence Structure"},"grammar_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Grammar Points"},"difficult_words":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Difficult Words"},"phrases":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Phrases"},"explanation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Explanation"},"id":{"type":"integer","title":"Id"},"subtitle_id":{"type":"integer","title":"Subtitle Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","subtitle_id","created_at","updated_at"],"title":"GrammarAnalysisResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PhoneticRequest":{"properties":{"text":{"type":"string","title":"Text"},"accent":{"type":"string","title":"Accent","default":"美式"}},"type":"object","required":["text"],"title":"PhoneticRequest","description":"音标生成请求模型"},"ProcessingTaskResponse":{"properties":{"id":{"type":"integer","title":"Id"},"video_id":{"type":"integer","title":"Video Id"},"task_type":{"type":"string","title":"Task Type"},"status":{"type":"string","title":"Status"},"progress":{"type":"integer","title":"Progress"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","video_id","task_type","status","progress","created_at"],"title":"ProcessingTaskResponse"},"SubTaskProgress":{"properties":{"name":{"type":"string","title":"Name","description":"任务名称"},"status":{"type":"string","title":"Status","description":"任务状态"},"progress":{"type":"integer","title":"Progress","description":"任务进度 (0-100)"}},"type":"object","required":["name","status","progress"],"title":"SubTaskProgress","description":"子任务进度"},"SubtitleResponse":{"properties":{"sequence_number":{"type":"integer","title":"Sequence Number"},"start_time":{"type":"number","title":"Start Time"},"end_time":{"type":"number","title":"End Time"},"original_text":{"type":"string","title":"Original Text"},"translation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Translation"},"phonetic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phonetic"},"id":{"type":"integer","title":"Id"},"video_id":{"type":"integer","title":"Video Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"grammar_analysis_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Grammar Analysis Id"}},"type":"object","required":["sequence_number","start_time","end_time","original_text","id","video_id","created_at","updated_at"],"title":"SubtitleResponse"},"SubtitleUpdate":{"properties":{"original_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Text"},"translation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Translation"},"phonetic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phonetic"},"start_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"End Time"}},"type":"object","title":"SubtitleUpdate"},"SubtitleWithGrammarResponse":{"properties":{"sequence_number":{"type":"integer","title":"Sequence Number"},"start_time":{"type":"number","title":"Start Time"},"end_time":{"type":"number","title":"End Time"},"original_text":{"type":"string","title":"Original Text"},"translation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Translation"},"phonetic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phonetic"},"id":{"type":"integer","title":"Id"},"video_id":{"type":"integer","title":"Video Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"grammar_analysis_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Grammar Analysis Id"},"grammar_analysis":{"anyOf":[{"$ref":"#/components/schemas/GrammarAnalysisResponse"},{"type":"null"}]}},"type":"object","required":["sequence_number","start_time","end_time","original_text","id","video_id","created_at","updated_at"],"title":"SubtitleWithGrammarResponse"},"TaskProgressResponse":{"properties":{"video_id":{"type":"integer","title":"Video Id","description":"视频ID"},"status":{"type":"string","title":"Status","description":"总体状态"},"progress":{"type":"integer","title":"Progress","description":"总体进度 (0-100)"},"tasks":{"items":{"$ref":"#/components/schemas/SubTaskProgress"},"type":"array","title":"Tasks","description":"子任务列表"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At","description":"开始时间"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At","description":"最后更新时间"}},"type":"object","required":["video_id","status","progress","tasks"],"title":"TaskProgressResponse","description":"任务进度查询响应"},"TranslateRequest":{"properties":{"text":{"type":"string","title":"Text"},"target_language":{"type":"string","title":"Target Language","default":"中文"}},"type":"object","required":["text"],"title":"TranslateRequest","description":"翻译请求模型"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VideoListResponse":{"properties":{"total":{"type":"integer","title":"Total"},"items":{"items":{"$ref":"#/components/schemas/VideoResponse"},"type":"array","title":"Items"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"}},"type":"object","required":["total","items","page","size"],"title":"VideoListResponse"},"VideoResponse":{"properties":{"title":{"type":"string","title":"Title","description":"视频标题"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"视频描述"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category","description":"分类"},"difficulty_level":{"anyOf":[{"$ref":"#/components/schemas/DifficultyLevel"},{"type":"null"}],"description":"难度级别"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","description":"标签列表"},"id":{"type":"integer","title":"Id"},"file_path":{"type":"string","title":"File Path"},"thumbnail_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Path"},"duration":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Duration"},"file_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"File Size"},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format"},"resolution":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution"},"status":{"$ref":"#/components/schemas/VideoStatus"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress","description":"总体处理进度","default":0}},"type":"object","required":["title","id","file_path","status","created_at","updated_at"],"title":"VideoResponse"},"VideoStatus":{"type":"string","enum":["uploading","processing","completed","failed"],"title":"VideoStatus","description":"视频处理状态"}}}}